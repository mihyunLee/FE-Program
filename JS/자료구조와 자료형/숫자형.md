# 숫자형



> 출처 - [**모던 JS 튜토리얼**](https://ko.javascript.info/)을 보고 정리한 글입니다.



<br>



1. 일반적인 숫자는 '배정밀도 부동소수점 숫자'로 알려진 64비트 형식의 IEEE-754에 저장된다.
2. 임의의 길이를 가진 정수는 `BigInt` 숫자로 나타낼 수 있다.

<br>

> **IEEE-754란?**
>
> IEEE에서 개발한 컴퓨터에서 부동소수점을 표현하는 표준이다.
>
> ±0 등의 수와 무한, NaN 등의 기호를 표시하는 법과 연산을 정의하고 있다.

<br>

## 1. 숫자를 입력하는 다양한 방법

### `e` 표기법

`e`는 `exponential`로, 10의 제곱수를 의미한다.

```javascript
1e3 = 1 * 1000
1.23e6 = 1.23 * 1000000

le-3 = 1 / 1000
1.23e-6 = 1.23 / 1000000
```

<br>

### 16진수, 2진수, 8진수

- 16진수 - `0x`

```javascript
alert( 0xff ); // 255
alert( 0xFF ); // 255 (대·소문자를 가리지 않으므로 둘 다 같은 값을 나타낸다.)
```

- 2진수 - `0b`, 8진수 - `0o`

```javascript
let a = 0b11111111; // 255의 2진수
let b = 0o377; // 255의 8진수

alert( a == b ); // true
```

이 3가지 진법 외의 진법을 사용하려면 함수 `parseInt`를 사용해야 한다.

<br>

## 2. toString(base)

`num.toString(base)` 메서드는 `base`진법으로 `num`을 표현한 후, 이를 문자형으로 변환해 반환한다.

```javascript
let num = 255;

alert( num.toString(16) );  // ff
alert( num.toString(2) );   // 11111111
```

- `base`는 `2`에서 `36`까지 쓸 수 있고, 기본값은 `10`이다.
- **base=16**
  - 16진수 색, 문자 인코딩 등을 표현할 때 사용한다.
  - 숫자는 `0`부터 `9`, 10이상의 수는 `A`부터 `F`를 사용하여 나타낸다.
- **base=2**
  - 비트 연산 디버깅에 쓰인다.
  - 숫자는 `0`또는 `1`이 될 수 있다.
- **base=36**
  - 사용할 수 있는 `base`중 최댓값으로, `0..9`와 `A..Z`를 사용해 숫자를 표현한다.
  - url을 줄이는 것과 같이 숫자로 된 긴 식별자를 짧게 줄일 때 유용하다.

<br>

### ⚠점 두 개와 메서드 호출

- `123456..toString(36)`
  - 숫자를 대상으로 메서드 toString을 직접 호출하고 싶다면 숫자 다음에 점 두개 `..`를 붙여야한다.
- `123456.toString(36)` ❌
  - 첫 번째 점 이후는 소수부로 인식되어 에러가 발생할 수 있다.
- `(123456).toString(36)`
  - 점 두개를 사용하는 것과 동작이 같다.

<br>

## 3. 어림수 구하기

- `Math.floor`
  - 소수점 첫째 자리에서 내림
- `Math.ceil`
  - 소수점 첫째 자리에서 올림
- `Math.round`
  - 소수점 첫째 자리에서 반올림
- `Math.trunc`
  - 소수부를 무시
  - Internet Explorer 에서는 지원하지 않음

<br>

### 소수점 `n-th`번째 수를 기준으로 어림수를 구할 때

1. 곱하기와 나누기

**Ex.** 소수점 두 번째 자리 숫자까지만 남기고 싶은 경우

```javascript
let num = 1.23456;

alert( Math.floor(num * 100) / 100 ); // 1.23456 -> 123.456 -> 123 -> 1.23
```

2. `toFixed(n)` 메서드 사용

```javascript
let num = 12.34;
alert( num.toFixed(1) ); // "12.3"
```

`toFixed`는 `Math.round`와 유사하게 반올림해준다.

```javascript
let num = 12.34;
alert( num.toFixed(5) ); // "12.34000"
```

메서드의 반환 값은 문자열이고, 소수부의 길이가 인수보다 작으면 끝에 0이 추가된다.

<br>

## 4. 부정확한 계산

숫자는 내부적으로 64비트 형식으로 표현되어 숫자를 저장할 땐 64비트가 필요하다.

64비트 중 52비트는 숫자를 저장하는 데 사용되고, 11비트는 소수점 위치를(정수는 0), 1비트는 부호를 저장하는 데 사용된다.

숫자가 너무 커지면 64비트 공간이 넘쳐서 `Infinity`를 반환한다.

또한 소수는 정밀도 손실 현상이 발생할 수 있다.

```javascript
alert(0.1 + 0.2); // 0.30000000000000004
```

10진법에서 10으로 나눈 값이 아닌 `1/3`(0.33333..)을 정확히 나눌 수 없듯이, 2진법을 사용해 10으로 나눈 `0.1` 또는 `0.2`를 **정확하게** 저장하는 방법은 없다.

따라서, IEEE-754에선 `toFixed`를 사용해 문제를 해결하지만, 실제로 작은 손실이 발생하기는 한다.

<br>

## 5. isNaN과 isFinite

- `isNaN(value)`

  - 인수를 숫자로 변환한 다음 `NaN`인지 테스트한다.

  ```javascript
  alert(isNaN(NaN)); // true
  alert(isNaN("str")); // true
  ```

  - NaN은 자기 자신을 포함하여 그 어떤 값과도 같지 않기 때문에 값이 NaN인지 판별할 때는 `===NaN`이 아닌 `isNaN`을 사용한다.

  ```javascript
  alert( NaN === NaN ); // false
  ```

- `isFinite(value)`

  - 인수를 숫자로 변환하고 변환한 숫자가 `NaN/Infinity/-Infinity`가 아닌 일반 숫자인 경우 `true`를 반환한다.
  - 빈 문자열이나 공백만 있는 문자열의 경우 모든 숫자 관련 내장 함수에서 `0`으로 취급된다.

  ```javascript
  alert( isFinite("15") ); // true
  alert( isFinite("str") ); // false, (NaN)
  alert( isFinite(Infinity) ); // false, (Infinity)
  ```

<br>

### `Object.js`와 비교하기

- Object.js

  - 값을 비교할 때 사용되는 내장 메서드
  - 특정 상황에서 `===`보다 신뢰할만한 결과를 보여준다.

  1) NaN을 대상으로 비교할 때

  ```javascript
  alert(Object.is(NaN, NaN)); // true
  ```

  2. `0`과 ` -0`이 다르게 취급되어야 할 때

  ```javascript
  alert(Object.js(0, -0)); // false
  ```

<br>

## 6. parseInt와 parseFloat

단항 덧셈 연산자 `+`또는 `Number()`를 사용하여 숫자형으로 변형할 때, 피연산자가 숫자가 아니면 형 변환이 실패한다.

이러한 경우를 해결하고자 `parseInt`와 `parseFloat`를 사용한다.

숫자를 읽는 도중 오류가 발생하면 이미 읽은 숫자까지만 반환한다.

- `parseInt(str)`
  - 정수를 반환한다.
- `parseFloat(str)`
  - 부동 소수점을 반환한다.

```javascript
alert( parseInt('100px') ); // 100
alert( parseFloat('12.5em') ); // 12.5

alert( parseInt('12.3') ); // 12
alert( parseFloat('12.3.4') ); // 12.3

alert(parseInt('a123')); // NaN
```

<br>

### parseInt(str, radix)

`parseInt()`의 두 번째 매개 변수인 `radix`는 원하는 진수를 지정해 줄 때 사용한다.

```javascript
alert( parseInt('0xff', 16) ); // 255
alert( parseInt('ff', 16) ); // 255, 0x가 없어도 동작한다.

alert( parseInt('2n9c', 36) ); // 123456
```

<br>

## 7. 기타 수학 함수

- `Math.random()`
  - 0과 1사이의 난수를 반환한다.
- `Math.max(a, b, c...)` / `Math.min(a, b, c...)`
  - 인수 중 최대, 최솟값을 반환한다.
- `Math.pow(n, power)`
  - `n`을 `power`번 거듭제곱한 값을 반환한다.

