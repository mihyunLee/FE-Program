# 배열



> 출처 - [**모던 JS 튜토리얼**](https://ko.javascript.info/)을 보고 정리한 글입니다.



<br>



키를 사용해 식별할 수 있는 값을 담은 컬렉션은 **객체**라는 자료구조를 이용해 저장할 수 있다. 하지만 객체는 순서가 없어 순서가 있는 컬렉션을 다뤄야 할 때 불편함이 있다.

순서가 있는 컬렉션을 저장할 때는 `배열`이라는 자료구조를 사용할 수 있다. 배열 요소의 자료형에는 제약이 없다.

<br>

## 1. 배열 선언

두 문법을 사용하여 빈 배열을 만들 수 있다.

```javascript
let arr = new Array(); // (1) 생성자 사용
let arr = []; // (2) 대괄호 리터럴 표기법
```

<br>

각 배열 요소는 0부터 숫자가 매겨져 있고, 이 숫자들은 ***인덱스***라고도 불리며 배열 내 순서를 나타낸다.

```javascript
let fruits = ["사과", "오렌지", "자두"];

alert( fruits[0] ); // 사과
alert( fruits[1] ); // 오렌지
alert( fruits[2] ); // 자두
```

인덱스를 사용하여 배열 내 특정 요소를 얻을 수도 있고, 수정하거나 추가할 수도 있다. 

<br>

- `arr.length` : 배열의 가장 큰 인덱스에 1을 더한 값. 주로 배열의 요소 개수를 알고 싶을 때 사용된다.
- `alert(arr)` : 배열 요소 전체를 출력할 수 있다.

<br>

## 2. pop·push 와 shift·unshift

[큐(queue)](https://en.wikipedia.org/wiki/Queue_(abstract_data_type))는 배열을 사용해 만들 수 있는 대표적인 자료구조로, 순서가 있는 컬렉션을 저장하는데 사용한다.

배열은 큐 이외에 [스택(stack)](https://en.wikipedia.org/wiki/Stack_(abstract_data_type))이라 불리는 자료구조를 구현할 때도 쓰인다.

| 자료구조         | 연산    | 설명                                                         |
| ---------------- | ------- | ------------------------------------------------------------ |
| 큐(queue)        | `push`  | 맨 끝에 요소를 추가                                          |
| 🔼 선입선출(FIFO) | `shift` | 제일 앞 요소를 꺼내 제거한 후 남아있는 요소들을 앞으로 밀어준다. |
| 스택(stack)      | `push`  | 요소를 스택 끝에 넣는다                                      |
| 🔼 후입선출(LIFO) | `pop`   | 스택 끝 요소를 추출                                          |

<br>

- `pop` / `push`
  - `pop` : 배열 끝 요소를 제거하고 제거한 요소를 반환한다.
  - `push` : 배열 끝에 요소를 추가한다.

```javascript
let fruits = ["사과", "오렌지", "배"];

alert( fruits.pop() ); // 배

alert( fruits ); // 사과,오렌지

alert( fruits.push("바나나") ); // 3

alert( fruits ); // 사과, 오렌지, 바나나
```

`fruits.push(...)`를 호출하는 것은 `fruits[frutis.length] = ...`과 동일한 동작이다.

<br>

- `shift` / `unshift`
  - `shift` : 배열 앞 요소를 제거하고, 제거한 요소를 반환한다.
  - `unshift` : 배열 앞에 요소를 추가한다.

```javascript
let fruits = ["사과", "오렌지", "배"];

alert( fruits.shift() ); // 사과

alert( fruits ); // 오렌지,배

fruits.unshift('바나나');

alert( fruits ); // 바나나,오렌지,배
```

<br>

## 2. 배열의 내부 동작 원리

배열은 특별한 종류의 **객체**이다. 배열 `arr`의 요소를 `arr[0]`처럼 대괄호를 사용해 접근하는 방식은 객체 문법에서 왔다. 다만 배열은 키가 숫자라는 점만 다르다.

배열은 객체형에 속하기 때문에 객체와 마찬가지로 참조를 통해 복사된다.

<br>

배열을 순서가 있는 자료의 컬렉션처럼 다루지 않고 일반 객체처럼 다루면 배열의 최적화 기법이 동작하지 않아 배열 특유의 이점이 사라진다.

> 잘못된 배열의 사용

- `arr.test = 5` : 숫자가 아닌 값을 프로퍼티 키로 사용하는 경우
- `arr[0]`과 `arr[1000]`만 추가하고 그 사이에 아무런 요소도 없는 경우
- `arr[1000]`, arr[999] 같이 요소를 역순으로 채우는 경우

<br>

## 3. 성능

`push`와 `pop`은 배열 끝에 요소를 추가하거나 제거하면 되므로 속도가 빠르지만, `shift`와 `unshift`는 배열의 시작에서 요소를 제거하고, 추가하므로 기존 요소의 이동과 `length` 프로퍼티 값의 갱신이 더해져 속도가 느리다.

<br>

## 4. 반복문

기본적인 `for `반복문 외에 배열에는 `for..of`를 사용할 수 있다.

```javascript
let fruits = ["사과", "오렌지", "자두"];

// 배열 요소를 대상으로 반복 작업을 수행한다.
for (let fruit of fruits) {
  alert( fruit );
}
```

`for..of`는 배열 요소의 인덱스는 얻을 수 없고, 값만 얻을 수 있다. 

배열은 객체에 속하므로 `for..in`도 사용할 수 있지만, `for..in`은 숫자형이 아닌 프로퍼티도 순회 대상에 포함되기도 하고, 배열이 아닌 객체와 함께 사용할 때 최적화되어 있어서 객체에 사용하는 것 대비 10~100배 정도 느리기 때문에 `for..in`은 권장하는 방법은 아니다. 

<br>

## 5. `length`  프로퍼티

배열에 무언가 조작을 가하면 `length` 프로퍼티가 자동으로 갱신된다. `length` 프로퍼티는 배열 내의 요소의 개수가 아니라 가장 큰 인덱스에 1을 더한 값이다.

```javascript
let fruits = [];
fruits[123] = '사과';

alert(fruits.length); // 124
```

<br>

`length` 프로퍼티는 쓰기가 가능하다.

```javascript
let arr = [1, 2, 3, 4, 5];

arr.length = 2;
alert( arr ); // [1, 2]

arr.length = 5;
alert( arr[3] ); // undefined: 삭제된 기존 요소들이 복구되지 않는다.
```

이런 특징을 이용하여 `arr.length = 0;`을 사용해서 배열을 비울 수 있다.

<br>

## 6. new Array()

```javascript
let arr = new Array("사과", "배", "기타");
```

대괄호 `[]`를 사용하면 더 짧은 문법으로 배열을 만들 수 있기 때문에 `new Array()`는 잘 사용되지 않는다.

대신 `new Array`에 숫자형 인수 하나를 넣어서 호출하면 **요소는 없지만 인수만큼의 길이를 갖는 배열**이 만들어진다.

```javascript
let arr = new Array(2);

alert(arr[0]); // undefined

alert(arr.length); // 2
```

`new Array(number)`를 이용해 만든 배열의 요소는 모두 `undefined`이다.

<br>

## 7. 다차원 배열

배열이 배열 요소가 될 때 이러한 배열을 ***다차원 배열***(multidimensional array)이라 부른다.

다차원 배열은 행렬을 저장하는 용도로 쓰인다.

```javascript
let matrix = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, 9]
];

alert( matrix[1][1] ); // 5
```

<br>

## 8. toString

배열에는 `toString` 메서드가 구현되어 있어 이를 호출하면 요소를 쉼표로 구분한 문자열이 반환된다.

```javascript
let arr = [1, 2, 3];

alert(arr); // 1, 2, 3
alert( [1] + 1 ); // 11
```

