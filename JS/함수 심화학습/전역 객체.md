# 전역 객체



> 출처 - [**모던 JS 튜토리얼**](https://ko.javascript.info/)을 보고 정리한 글입니다.



<br>



### 1. 전역 객체

- 호스트 환경에 따른 전역 객체

| 브라우저 환경 | Node.js 환경 |
| ------------- | ------------ |
| `window`      | `global`     |

- 최근 자바스크립트 명세에서는 전역 객체의 이름을 `globalThis`로 표준화하자는 내용이 추가되었고, Chromium 기반이 아닌 몇몇 브라우저는 아직 `globalThis`를 지원하지 않지만 폴리필을 구현하여 사용할 수 있다.

- `var` 로 선언한 전역 함수나 전역 변수는 **전역 객체의 프로퍼티**가 된다.

  - 모던 자바스크립트에서는 모듈을 사용하기 때문에 이런 방식을 지원하지 않는다.

  ```javascript
  var gVar = 5;
  
  alert(window.gVar); // 5 (var로 선언한 변수는 전역 객체 window의 프로퍼티가 된다.)
  ```

- 변수를 모든 스크립트에서 사용하게 하려면 전역 객체에 직접 프로퍼티를 추가하면 된다.

  ```javascript
  // 모든 스크립트에서 현재 사용자(current user)에 접근할 수 있게 이를 전역 객체에 추가
  window.currentUser = {
    name: "John"
  };
  
  // 아래와 같은 방법으로 모든 스크립트에서 currentUser에 접근할 수 있음
  alert(currentUser.name);  // John
  
  // 지역 변수 'currentUser'가 있다면
  // 지역 변수와 충돌 없이 전역 객체 window에서 이를 명시적으로 가져올 수 있음
  alert(window.currentUser.name); // John
  ```

- 전역 변수는 되도록 사용하지 않는 것이 좋다.

<br>

### 2. 폴리필 사용하기

- 전역 객체를 이용해 현재 사용중인 브라우저가 최신 자바스크립트 기능을 지원하는지 여부를 확인할 수 있다.
  - 구식 브라우저는 `Promise` 객체를 지원하지 않기 때문에 `alert`가 실행된다.

```javascript
if (!window.Promise) {
  alert("구식 브라우저를 사용 중이시군요!");
}
```

- 해당 기능을 지원하지 않는 오래된 브라우저를 사용하고 있다면 직접 함수를 만들어 전역 객체에 추가하는 방식으로 `폴리필`을 만들 수 있다.

```javascript
if (!window.Promise) {
  window.Promise = ... // 모던 자바스크립트에서 지원하는 기능을 직접 구현함
}
```



